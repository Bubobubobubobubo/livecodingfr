<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="../favicon.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="theme-color" content="#ffffff">
		
		<link href="../_app/immutable/assets/0.x88-ymMa.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/entry/start.rkHF838T.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/scheduler.aZRR5A_O.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.feFbK-O9.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/preload-helper.0HuHagjb.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/index.kYoizZ4A.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/0.qqbATDHs.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/9.49Ykn-Wh.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/dynamic-import-helper.0gtGTknh.js">
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents">  <div><div class="bg-neutral-800"><nav class="pl-8 py-2 md:flex md:justify-between md:items-center pr-8"><div class="flex items-center justify-between"><a href="/" class="website-title text-2xl font-bold bg-gradient-to-r from-orange-700 via-blue-500 to-green-400 text-transparent bg-clip-text animate-gradient" data-svelte-h="svelte-15xybd8">livecoding.fr</a>  <div class="flex md:hidden" data-svelte-h="svelte-glwq61"><button type="button" class="text-gray-100 hover:text-gray-400 focus:outline-none focus:text-gray-400"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path></svg></button></div></div>  <div class="flex-col mt-8 space-y-4 md:flex md:space-y-0 md:flex-row md:items-center md:space-x-10 md:mt-0 hidden"><a href="/evenements" class="mobile-menu-link" data-svelte-h="svelte-11zf95a">Évènements</a> <a href="/membres" class="mobile-menu-link" data-svelte-h="svelte-1a3do61">Membres</a> <a href="/outils" class="mobile-menu-link" data-svelte-h="svelte-ee0p45">Outils</a> <a href="/guides" class="mobile-menu-link" data-svelte-h="svelte-5misk3">Guides</a> <a href="/articles" class="mobile-menu-link" data-svelte-h="svelte-kglg6r">Articles</a> <a href="/reseaux" class="mobile-menu-link" data-svelte-h="svelte-6wk0bt">Réseaux</a> <a href="/ressources" class="mobile-menu-link" data-svelte-h="svelte-ziwryh">Ressources</a> <a href="/presse" class="mobile-menu-link" data-svelte-h="svelte-6fl78t">Presse</a> <a href="/contacts" class="mobile-menu-link" data-svelte-h="svelte-1skvj1i">Contact</a></div></nav></div></div> <main class="bg-neutral-900"><div class="drawer lg:drawer-open"><input id="my-drawer-2" type="checkbox" class="drawer-toggle"> <div class="drawer-content space-y-4 flex flex-col lg:px-16 px-4 py-8"><article><h1>Introduction au live coding sur SuperCollider (II)</h1> <div class="pt-4 flex justify-between mb-12"><p class="inline font-bold">Publié le : 2023-24-12</p> <p class="inline font-bold">Auteur : Raphaël Maurice Forment</p></div> <div class="lg:px-24 md:px-12 content-center"><article><h2 data-svelte-h="svelte-1ukekoe">Introduction</h2> <h3 data-svelte-h="svelte-tla2tn">Le labyrinthe <strong>SuperCollider</strong></h3> <div style="margin-bottom:100px" data-svelte-h="svelte-u3kyqm"><br> <div><a href="https://www.instagram.com/p/CtHWU0fuOKd/"><img style="min-width: 200px;width:30%;height:auto;float:inline-end;padding-right:20px;margin-left:20px" src="/images/supercollider_meme.png"></a></div> <p>Si vous avez lu et suivi le premier article, tout est en place et vous devriez
maintenant être prêt à jouer. L’une des qualités mais aussi l’un des défauts de <strong>SuperCollider</strong> est de ne
pas vous astreindre à suivre une route particulière concernant la manière dont il vous faut approcher la création sonore lorsque vous débutez. Le logiciel est extrêmement générique et chaque
utilisateur développe progressivement ses propres abstractions et une logique qui lui est propre. Il existe plusieurs dizaines de mécanismes
distincts et la documentation tentaculaire du logiciel recommande souvent des
approches contradictoires ou des solutions qui ne fonctionneront pas
nécessairement avec votre méthode de travail. Il est donc nécessaire d’être toujours
conscient des choix que vous avez opéré et ne pas hésiter à revenir en
arrière si ces derniers ne vous conviennent pas. <strong>SuperCollider</strong> est un logiciel
déjà ancien, et la librairie standard est si vaste qu’il est difficile de la comprendre entièrement et encore moins de la maîtriser. Il
est toutefois possible de développer une certaine expertise pour utiliser <strong>SuperCollider</strong> d’une certaine manière  et de construire progressivement ses connaissances en fonction des projets.</p> <br></div> <h3 data-svelte-h="svelte-hvsu7a"><strong>JITLib</strong> et le <em>live coding</em></h3> <br> <p data-svelte-h="svelte-1ebejs">L’approche que nous suivons dans ce guide repose sur la librairie <a href="https://doc.sccode.org/Overviews/JITLib.html" rel="nofollow">JITLib</a>. Cette librairie développée par <a href="https://www.rsh-duesseldorf.de/institute/institut-fuer-musik-und-medien/lehrende-mitarbeitende/rohrhuber-julian" rel="nofollow">Julian Rohrhuber</a> est devenue si populaire qu’elle est désormais intégrée par défaut à <strong>SuperCollider</strong> lors de l’installation. Les avantages offerts par cette dernière ne sont pas évidents à saisir lorsqu’on débute sur <strong>SuperCollider</strong>. Un grand nombre d’utilisateurs l’ignorent complètement dans leur travail. La raison qui nous pousse à l’utiliser est que cette dernière est prévue, <em>par défaut</em>, pour permettre le <em>live coding</em>. Même dans ce domaine déjà très spécifique, <strong>JITLib</strong> reste encore relativement générique. Le mécanisme que la librairie implémente est très simple : <strong>JITLib</strong> permet de remplacer <em>à chaud</em>, <em>en temps réel</em>, n’importe quelle donnée (audio, information) par une information de nature similaire. Voici la traduction du premier paragraphe de la documentation :</p> <br> <blockquote class="bg-base-300 px-4 py-8 border-l-2" data-svelte-h="svelte-mc41r1"><p>La programmation <em>just in time</em> (ou la programmation conversationnelle, le <em>live coding</em>, la <em>programmation à la volée</em>, la programmation interactive) est un paradigme qui inclut l’activité de programmation dans le déroulement du programme. Dans ce paradigme, le programme n’est pas considéré comme un outil qui est conçu avant d’être utilisé plus tard de manière productive. Plutôt, il s’agit de concevoir la conception dynamique des programmes comme une description et comme une conversation. Écrire du code devient une partie intégrante de l’expérience musicale ou de la pratique expérimentale.</p></blockquote> <br> <p data-svelte-h="svelte-jjfyzb"><strong>JITLib</strong> intègre ce principe à <strong>SuperCollider</strong> de manière assez approfondie. On se retrouve rarement bloqué du fait d’une incompatibilité entre la librairie standard et <strong>JITLib</strong>. Par ailleurs, <strong>JITLib</strong> est si finement intégré qu’il est parfois délicat de savoir si telle ou telle fonctionnalité relève de cette librairie ou vient de l’installation standard de <strong>SuperCollider</strong>.</p> <br> <h3 data-svelte-h="svelte-kghh5b">Conseils de lecture</h3> <br> <p data-svelte-h="svelte-18ss6m2">Cette partie du guide est <em>de loin la plus pénible</em>. Elle introduit tout les concepts importants que nous manipulerons pour faire de la musique avec <strong>SuperCollider</strong>. Il s’agit en quelque sorte du solfège élémentaire pour un <em>live coder</em> utilisant <strong>SuperCollider</strong>. Je suis conscient que les premiers paragraphes sont particulièrement difficiles pour un utilisateur débutant. N’hésitez pas à continuer votre lecture si un détail vous échappe, vous finirez sans doute par comprendre ultérieurement par la pratique. Ne vous laissez pas arrêter par du vocabulaire ou des concepts peu familiers.</p> <h2 data-svelte-h="svelte-wziajp"><code>ProxySpace</code> et <code>Ndefs</code></h2> <h3 data-svelte-h="svelte-1czqyl4">Le principe de base de la librairie</h3> <br> <p data-svelte-h="svelte-1qme27z">Tout commence avec un peu de vocabulaire. <strong>JITLib</strong> introduit la notion de <strong>ProxySpace</strong>, un environnement de références vers des <em>proxys</em> : ”<em>an environment of references on a server</em>”. Une référence est un nom associé à un objet. C’est aussi simple que <code>~a = 2</code> ou <code>~a</code> est un <em>proxy</em> et <code>2</code> un objet. Ce système fonctionne à l’aide de <em>proxys</em>, il nous faut donc comprendre ce qu’est un <em>proxy</em>. C’est une notion relativement simple, il s’agit d’un objet qui contient <em>quelque chose</em>.</p> <br> <div class="pl-8 pt-4 pb-4 bg-base-300" data-svelte-h="svelte-1307hli"><p><strong>Proxy:</strong> un <em>proxy</em> est un contenant pour <em>quelque chose</em> qui tourne sur le serveur, généralement un contrôle ou un algorithme audio. C’est un objet vide ou non-vide. Un <em>proxy</em> peut contenir le <em>node</em> d’un oscillateur (<em>cf.</em> la suite) mais il pourrait aussi contenir un filtre audio, un synthétiseur que nous venons de créer ou même un pattern algorithmique. Le <em>proxy</em> englobe ce qu’il contient et réalise à notre place tout un tas d’opérations qu’il est d’ordinaire nécessaire de gérer manuellement. Par exemple, on peut remplacer le contenu d’un <em>proxy</em> par un autre <em>node</em> sans interruption du signal, supprimer le contenant d’un <em>proxy</em> sans pour autant supprimer la boîte elle-même.</p></div> <br> <p data-svelte-h="svelte-prqoyf">Un <strong>ProxySpace</strong> est un ensemble de clés et de valeurs, un grand sac dans lequel on manipule des <em>proxy</em>. Les clés sont des références vers des <code>NodeProxy</code>. Tout ceci est sans aucune importance tant que nous ne le manipulons pas pour générer du son.</p> <br> <h3 data-svelte-h="svelte-rrudo5">Remplacer l’environnement par défaut par un <code>ProxySpace</code></h3> <br> <p data-svelte-h="svelte-q4c6o4">Dans le guide précédent se trouvait une ligne assez inhabituelle, celle qui nous servait pour démarrer le serveur :</p> <pre class="language-supercollider"><!-- HTML_TAG_START --><code class="language-supercollider">p <span class="token operator">=</span> <span class="token class-name">ProxySpace</span><span class="token punctuation">.</span>push<span class="token punctuation">(</span>s<span class="token punctuation">.</span>boot<span class="token punctuation">)</span><span class="token punctuation">;</span></code><!-- HTML_TAG_END --></pre> <p data-svelte-h="svelte-15qr1gz">Sans entrer dans le détail, cette ligne réalise deux actions distinctes :</p> <div class="pl-8" data-svelte-h="svelte-1b0se9j"><br> <p>1) elle démarre le serveur audio de <strong>SuperCollider</strong> (<code>s.boot</code>)</p> <p>2) elle <em>pousse</em> l’environnement par défaut dans un <strong>ProxySpace</strong></p></div> <br> <p data-svelte-h="svelte-39j5eg">Avec la méthode <code>push</code>, toutes les variables globales de l’environnement actuel deviennent mécaniquement des <code>NodeProxy</code> dans le <strong>ProxySpace</strong>. Pour s’en convaincre, il suffit de taper le nom d’une variable et d’observer la valeur de retour :</p> <br> <pre class="language-supercollider"><!-- HTML_TAG_START --><code class="language-supercollider">~bob<span class="token punctuation">;</span> <span class="token comment">// -> NodeProxy.nil(localhost, nil)</span></code><!-- HTML_TAG_END --></pre> <p data-svelte-h="svelte-1uzz73c">Ce n’est pas très parlant si vous n’êtes oas habitués à <strong>SuperCollider</strong> ou à la programmation. Essayons maintenant de voir ce que cela signifie lorsque nous souhaitons manipuler du son, sans spécifiquement aborder tout les détails. Évaluez le code suivant ligne par ligne :</p> <pre class="language-cpp"><!-- HTML_TAG_START --><code class="language-cpp"><span class="token operator">~</span>osc <span class="token operator">=</span> <span class="token punctuation">&#123;</span>SinOsc<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token comment">// J'évalue, rien ne se passe. Associe une fonction audio à un NodeProxy</span>
<span class="token operator">~</span>osc<span class="token punctuation">.</span>play<span class="token punctuation">;</span>                     <span class="token comment">// On connecte l'audio à la sortie et on joue la fonction</span>
<span class="token operator">~</span>osc <span class="token operator">=</span> <span class="token punctuation">&#123;</span>SinOsc<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token comment">// On remplace la fonction précédente par une autre (sans interruption !)</span>
<span class="token operator">~</span>osc<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span>fadeTime<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// On stoppe avec un joli fade-out</span>
<span class="token operator">~</span>osc<span class="token punctuation">.</span>clear<span class="token punctuation">;</span>                    <span class="token comment">// On libère la mémoire</span></code><!-- HTML_TAG_END --></pre> <br> <p data-svelte-h="svelte-2ptytj">Nous avons associé une fonction audio (<code>{SinOsc.ar(200) * 0.5}</code>) à une référence (<code>~osc</code>). C’est tout le principe de <strong>JITLib</strong>. Cette association peut être remplacée à tout moment sans interruption grâce au <em>proxy</em>. Le <code>NodeProxy</code> nommé <code>~osc</code> accepte un grand nombre de manipulations différentes et son rôle est totalement redéfini par rapport au comportement habituel d’une variable en dehors de l’utilisation de <strong>JITLib</strong>.</p> <br> <p data-svelte-h="svelte-4rtqxi">Ce n’est plus une variable, c’est un <code>Proxy</code> dans notre <code>ProxySpace</code>. La ligne <code>~osc.stop(fadeTime: 4)</code> démontre aussi que les <code>NodeProxy</code> intègrent de nombreuses méthodes destinées à gérer l’audio: <em>fade in</em>, <em>fade out</em>, contrôle du niveau des sources : etc.</p> <br> <p data-svelte-h="svelte-1n2er81">Nous allons utiliser ce principe fondamental introduit par <strong>JITLib</strong> tout au long de ce guide pour contrôler tout ce que nous souhaitons / pouvons contrôler : <strong>algorithmes audio</strong>, <strong>patterns algorithmiques</strong>, <strong>effets sonores</strong>, etc. Il est <strong>essentiel</strong> de retenir ce principe du <em>proxy</em> car il nous permet de savoir réellement ce que nous sommes en train de manipuler à tout moment au cours du jeu : essentiellement des <code>NodeProxy</code>.</p> <br> <p data-svelte-h="svelte-nk7hbz">Sans en savoir beaucoup plus, il est déjà possible de faire un petit peu de musique en s’amusant à remplacer une source par un autre :</p> <pre class="language-cpp"><!-- HTML_TAG_START --><code class="language-cpp"><span class="token operator">~</span>osc <span class="token operator">=</span> <span class="token punctuation">&#123;</span>SinOsc<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token comment">// On associe une source à un NodeProxy, un double oscillateur</span>
<span class="token operator">~</span>osc<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span>fadeTime<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// On lance le NodeProxy avec un fade-in</span>
<span class="token operator">~</span>osc<span class="token punctuation">.</span>fadeTime <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>                    <span class="token comment">// On change le fadeTime général</span>

<span class="token operator">~</span>osc <span class="token operator">=</span> <span class="token punctuation">&#123;</span>LPF<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span>SinOsc<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> SinOsc<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token comment">// On remplace la source</span>
<span class="token operator">~</span>osc <span class="token operator">=</span> <span class="token punctuation">&#123;</span>LPF<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span>SinOsc<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">350</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> SinOsc<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token comment">// On remplace la source</span>
<span class="token operator">~</span>osc <span class="token operator">=</span> <span class="token punctuation">&#123;</span>LPF<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span>SinOsc<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> SinOsc<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token comment">// On remplace la source</span>

<span class="token operator">~</span>osc<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span>fadeTime<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// Fade-out</span>
<span class="token operator">~</span>osc<span class="token punctuation">.</span>clear<span class="token punctuation">;</span>                           <span class="token comment">// On libère la mémoire</span></code><!-- HTML_TAG_END --></pre> <br> <p data-svelte-h="svelte-mlyqm">Même si tout reste assez primitif pour le moment, on peut déjà faire beaucoup de choses en suivant ce principe. Il est possible d’utiliser n’importe quel algorithme audio et de le mettre à jour graduellement tout au long d’une performance. Ce type de <em>live coding</em> centré autour de la musique à jour d’un générateur sonore se prête plutôt bien à de la musique électro-acoustique, <em>ambient</em>, <em>noise</em>, etc.</p> <br> <h3 data-svelte-h="svelte-1t7im02">Les <code>Ndefs</code> : une autre manière de faire la même chose</h3> <br> <p data-svelte-h="svelte-ngon7m">La technique que nous utilisons avec <code>ProxySpace.push(s.boot)</code> <em>dissimule</em> l’utilisation que nous faisons des <code>NodeProxy</code>. Cette fonctionnalité a été intégrée car elle permet de gagner du temps de frappe mais elle a pour désavantage de rendre plus difficilement perceptible ce que nous sommes réellement en train de faire. À première vue, il semble que <code>~a = 2</code> soit juste une assignation de variable comme dans un langage de programmation classique. Pourtant, il s’agit d’une opération qui crée/modifie un <code>NodeProxy</code>.</p> <br> <p data-svelte-h="svelte-f4v0jn">Nous occultons le fait que les variables globales de <strong>SuperCollider</strong> sont maintenant des <code>NodeProxy</code>. Il est possible de se passer entièrement de <code>Proxyspace.push</code> et de cet avantage/désagrément en utilisant les <code>Ndefs</code>. Il s’agit d’une préférence personnelle, presque d’ordre stylistique.</p> <br> <div class="alert bg-neutral-600 border-none"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-xl text-white"><!-- HTML_TAG_START -->Pour être plus précis, <code>ProxySpace.push(...)</code> transforme le <em>scope</em> global en un <code>ProxySpace</code>. Seule les variables de <code>a</code> à <code>z</code> sont épargnées.<!-- HTML_TAG_END --></span></div> <br> <p data-svelte-h="svelte-l6ldcg">Le terme de <strong>NDef</strong> est un raccourci pour <em>Node Proxy Definition</em>. On retrouve du vocabulaire familier. C’est une autre manière de désigner exactement le même type d’objet que ce que nous manipulons depuis le début ! Seule la syntaxe diffère. Profitons-en quand même pour évoquer rapidement ce qu’est un <em>node</em> :</p> <br> <div class="pl-8 pt-4 pb-4 bg-base-300" data-svelte-h="svelte-19ar4er"><p><strong>Node:</strong> un <em>node</em> est un objet défini en interne par le serveur audio de <strong>SuperCollider</strong>. Un synthétiseur est un <em>node</em>, beaucoup d’objets présents sur le serveur sont des <em>nodes</em>. Il s’agit d’un objet générique utilisé pour une opération audio : contrôle ou synthétiseur. C’est un objet abstrait, qu’on ne manipule jamais directement. Les fonctions audio que nous venons d’utiliser dans l’exemple précédent sont des <em>nodes</em> que l’on associe à un <em>proxy</em>. Un <em>node</em> tire ce nom du fait que ce sont des <em>noeuds</em> dans un graphe audio, des objets qui ont une position dans un graphe de traitement du signal.</p></div> <br> <p data-svelte-h="svelte-1i92p2x">Les <code>Ndefs</code> ont pour avantage de ne pas se propager dans l’environnement local. Elles rendent tout un petit peu plus clair. Réécrivons l’exemple précédent en utilisant uniquement des <code>Ndefs</code> :</p> <pre class="language-cpp"><!-- HTML_TAG_START --><code class="language-cpp"><span class="token function">Ndef</span><span class="token punctuation">(</span>osc<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>SinOsc<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// On associe une source à un NodeProxy, un double oscillateur</span>
<span class="token function">Ndef</span><span class="token punctuation">(</span>osc<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span>fadeTime<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// On lance le NodeProxy avec un fade-in</span>
<span class="token function">Ndef</span><span class="token punctuation">(</span>osc<span class="token punctuation">)</span><span class="token punctuation">.</span>fadeTime <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>                    <span class="token comment">// On change le fadeTime général</span>

<span class="token function">Ndef</span><span class="token punctuation">(</span>osc<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>LPF<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span>SinOsc<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> SinOsc<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// On remplace la source</span>
<span class="token function">Ndef</span><span class="token punctuation">(</span>osc<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>LPF<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span>SinOsc<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">350</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> SinOsc<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// On remplace la source</span>
<span class="token function">Ndef</span><span class="token punctuation">(</span>osc<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>LPF<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span>SinOsc<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> SinOsc<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// On remplace la source</span>

<span class="token function">Ndef</span><span class="token punctuation">(</span>osc<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span>fadeTime<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// Fade-out</span>
<span class="token function">Ndef</span><span class="token punctuation">(</span>osc<span class="token punctuation">)</span><span class="token punctuation">.</span>clear<span class="token punctuation">;</span>                           <span class="token comment">// On libère la mémoire</span></code><!-- HTML_TAG_END --></pre> <p data-svelte-h="svelte-13bak3j">C’est à vous de choisir quelle est la syntaxe que vous préférez.</p> <h2 data-svelte-h="svelte-1i05dg4">Gestion des <code>NodeProxy</code></h2> <h3 data-svelte-h="svelte-1clix3u"><code>fadeTime</code></h3> <p data-svelte-h="svelte-iadzxn">Nous avons déjà utilisé la capacité des <code>NodeProxy</code> à opérer des <em>fade-ins</em> et des <em>fade-outs</em>. C’est une fonctionnalité très pratique, surtout lorsque vous manipulez des sources audio dynamiques et que vous souhaitez faire des transitions souples de l’une à l’autre. Il existe trois types de <em>fade</em> :</p> <ul data-svelte-h="svelte-1vm6l4q"><li><em>fade-in</em> à l’entrée : c’est un argument de la méthode <code>.play</code> : <code>~osc.play(fadeTime: 4)</code> ou <code>Ndef(\osc).play(fadeTime: 4)</code></li> <li><em>fade-in</em> en sortie : c’est un argument de la méthode <code>.stop</code> ou <code>.clear</code> : <code>~osc.stop(fadeTime: 4)</code> ou <code>Ndef(\osc).stop(fadeTime: 4)</code></li> <li><em>fade</em> général : c’est un attribut du <code>NodeProxy</code> que l’on contrôle avec la syntaxe <code>~osc.fadeTime = 4</code>;</li></ul> <pre class="language-cpp"><!-- HTML_TAG_START --><code class="language-cpp"><span class="token operator">~</span>osc <span class="token operator">=</span> <span class="token punctuation">&#123;</span>SinOsc<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token comment">// On crée une source audio</span>

<span class="token operator">~</span>osc<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span>fadeTime<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// On fait entrer doucement</span>

<span class="token operator">~</span>osc<span class="token punctuation">.</span>fadeTime <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>            <span class="token comment">// Transition très longue</span>

<span class="token operator">~</span>osc <span class="token operator">=</span> <span class="token punctuation">&#123;</span>SinOsc<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token comment">// Transition lente vers la fréquence voulue</span>

<span class="token operator">~</span>osc<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span>fadeTime<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// On s'arrête</span></code><!-- HTML_TAG_END --></pre> <br> <h3 data-svelte-h="svelte-1pfcn9s"><code>.stop</code> / <code>.clear</code></h3> <p data-svelte-h="svelte-wngjim">Les méthodes <code>.stop</code> et <code>.clear</code> ne réalisent pas la même opération :</p> <ul data-svelte-h="svelte-1hgojc8"><li><code>.stop</code> : déconnecte le <code>NodeProxy</code> du reste de la chaîne audio. Il continue à tourner (et à consommer des ressources) mais en silence ! Vous pourrez le reconnecter plus tard.</li> <li><code>.clear</code> : détruit le <code>NodeProxy</code>. Vous pouvez réaliser la même opération en tapant : <code>~osc = nil</code>. Notez toutefois que <code>.clear</code> permet de spécifier un <em>fade-out</em> avant la destruction.</li></ul> <p data-svelte-h="svelte-qhss8m">Si vous souhaitez vous débarrasser de tout les <code>NodeProxy</code> actifs, il existe cette commande :</p> <pre class="language-supercollider"><!-- HTML_TAG_START --><code class="language-supercollider">currentEnvironment<span class="token punctuation">.</span>free<span class="token punctuation">;</span></code><!-- HTML_TAG_END --></pre> <p data-svelte-h="svelte-1scrxs3">Elle applique la fonction <code>free</code> à tout ce qui compose l’environnement global.
Puisque ce dernier est un <code>ProxySpace</code>, on libère tout les <code>NodeProxy</code>.</p> <h2 data-svelte-h="svelte-1wfsiwi">Modifier un/des paramètres</h2> <p data-svelte-h="svelte-1yofu9l">Vous n’êtes pas obligés de réévaluer l’algorithme dans son intégralité pour modifier une valeur sur un <code>NodeProxy</code>. Parfois, il est préférable de mettre à jour un paramètre sans que le <em>fade-in</em> et le <em>fade-out</em> ne s’appliquent. Ce problème sera particulièrement sensible lorsque vous utiliserez des effets tels qu’un délai ou une réverbération.</p> <br> <p data-svelte-h="svelte-1tefuf0">Si vous changez uniquement de valeur en réévaluant l’algorithme en entier, cela causera des problèmes avec l’amplitude générale du signal. Cela peut aussi causer un effet de brouillon lié à la superposition de plusieurs algorithmes en cours de <em>fade-in</em> / <em>fade-out</em>. Deux méthodes existent pour mettre à jour un paramètre : <code>.set</code> (instantané) et <code>.xset</code> (progressif).</p> <h3 data-svelte-h="svelte-1890c3r"><code>.set</code></h3> <p data-svelte-h="svelte-18br2j9">La méthode <code>.set</code> met immédiatement à jour un paramètre <strong>immédiatement</strong>, dès que possible :</p> <pre class="language-cpp"><!-- HTML_TAG_START --><code class="language-cpp"><span class="token operator">~</span>osc <span class="token operator">=</span> <span class="token punctuation">&#123;</span> arg freq<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">;</span> SinOsc<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span>freq<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token operator">~</span>osc<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span>fadeTime<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">~</span>osc<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">~</span>osc<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">~</span>osc<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><!-- HTML_TAG_END --></pre> <h3 data-svelte-h="svelte-1ywd8zx"><code>.xset</code></h3> <p data-svelte-h="svelte-1fkbmv9">La méthode <code>.xset</code> met immédiatement à jour un paramètre <strong>progressivement</strong>, suivant le <code>fadeTime</code> :</p> <pre class="language-cpp"><!-- HTML_TAG_START --><code class="language-cpp"><span class="token operator">~</span>osc <span class="token operator">=</span> <span class="token punctuation">&#123;</span> arg freq<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">;</span> SinOsc<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span>freq<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token operator">~</span>osc<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span>fadeTime<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">~</span>osc<span class="token punctuation">.</span>fadeTime <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment">// On change le fadeTime pour .xset</span>
<span class="token operator">~</span>osc<span class="token punctuation">.</span><span class="token function">xset</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">~</span>osc<span class="token punctuation">.</span><span class="token function">xset</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">~</span>osc<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><!-- HTML_TAG_END --></pre> <h3 data-svelte-h="svelte-1vok2p4">Contrôler plusieurs paramètres</h3> <br> <p data-svelte-h="svelte-xi4rz2">Il est possible de contrôler plusieurs paramètres en une seule commande si
besoin est :</p> <pre class="language-supercollider"><!-- HTML_TAG_START --><code class="language-supercollider">~osc<span class="token punctuation">.</span>xset<span class="token punctuation">(</span><span class="token symbol">req</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">,</span> <span class="token symbol">amp</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><!-- HTML_TAG_END --></pre> <p data-svelte-h="svelte-7x740t">Tout dépend de ce dont vous avez besoin. Réévaluer la fonction entière peut
aussi être une stratégie intéressante dans certains cas.</p> <h2 data-svelte-h="svelte-1rbm8z9">Communication entre <code>NodeProxies</code></h2> <p data-svelte-h="svelte-4omyha">On peut associer plusieurs <code>NodeProxies</code> pour former des algorithmes audio plus complexes et modulaires. Chaque <code>NodeProxy</code> peut être imaginé comme un module remplissant une fonction particulière dans un synthétiseur modulaire plus imposant. Pensez au <em>patching</em> dans un environnement comme <em>Max/MSP</em> ou <em>Pure Data</em> ou au <em>patching</em> analogique d’un synthétiseur physique.</p> <br> <p data-svelte-h="svelte-10x1h48">Il est possible de définir un <code>NodeProxy</code> oscillateur puis un contrôle (de type <em>LFO</em>) pour moduler la fréquence de cet oscillateur. Voici la méthode la plus simple que vous puissiez employer :</p> <pre class="language-cpp"><!-- HTML_TAG_START --><code class="language-cpp"><span class="token operator">~</span>source <span class="token operator">=</span> <span class="token punctuation">&#123;</span>arg freq<span class="token operator">=</span><span class="token number">400</span><span class="token punctuation">;</span> SinOsc<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span>freq<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token comment">// Une source que l'on souhaite moduler</span>
<span class="token operator">~</span>source<span class="token punctuation">.</span>play<span class="token punctuation">;</span>
<span class="token operator">~</span>source<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// On peut utiliser set pour une valeur statique</span>
<span class="token operator">~</span>freq <span class="token operator">=</span> <span class="token punctuation">&#123;</span> SinOsc<span class="token punctuation">.</span><span class="token function">ar</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">400</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>   <span class="token comment">// Voici un LFO (Low Frequency Oscillator)</span>
<span class="token operator">~</span>source<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>\freq<span class="token punctuation">,</span> <span class="token operator">~</span>freq<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// Utilisation de la fonction map</span></code><!-- HTML_TAG_END --></pre> <p data-svelte-h="svelte-548767"><code>.map</code> possède une fonction alternative, nommée <code>.xmap</code>. Elle fonctionne tout
comme <code>.set</code> et <code>.xset</code>.</p> <h2 data-svelte-h="svelte-grw4hp">Conclusion</h2> <p data-svelte-h="svelte-v1qoh8">Dans cette section du guide, nous avons appris :</p> <ul data-svelte-h="svelte-ax6drr"><li>Ce qu’est un <code>NodeProxy</code> et un <code>ProxySpace</code>, l’outil de base offert par <strong>JITLib</strong></li> <li>La différence entre <code>ProxySpace.push</code> et l’utilisation explicite des <code>NDefs</code></li> <li>Comment démarrer, stopper et arrêter un <code>NodeProxy</code></li> <li>Comment contrôler le <em>fade-in</em> et le <em>fade-out</em> et la transition entre algorithmes</li></ul> <p data-svelte-h="svelte-j92gtb">Je ne fais ici qu’effleurer les différentes commandes que possèdent les <code>NodeProxy</code>. Si vous souhaitez en apprendre plus, allez voir la documentation. Nous utiliserons un nombre limité de méthodes au fur et à mesure, lorsque nous en aurons besoin.</p></article> <p class="rounded-lg font-bold border-2 py-2 pl-2 mt-8 bg-neutral-800" data-svelte-h="svelte-1mht20g"><a href="/guides">Revenir à l&#39;index</a></p></div></article></div> <div class="drawer-side no-scrollbar m-0" data-svelte-h="svelte-11ixv29"><label for="my-drawer-2" aria-label="close sidebar" class="drawer-overlay scrollbar-hide whitespace-nowrap overflow-hidden no-scrollbar"></label> <ul class="menu sidemenu-style no-scrollbar my-0"><li class="sideli"><a class="sidebar-link" href="/evenements">Évènements</a></li> <li class="sideli"><a class="sidebar-link" href="/membres">Membres</a></li> <li class="sideli"><a class="sidebar-link" href="/outils">Outils</a></li> <li class="sideli"><a class="sidebar-link" href="/guides">Guides</a></li> <li class="sideli"><a class="sidebar-link" href="/articles">Articles</a></li> <li class="sideli"><a class="sidebar-link" href="/reseaux">Réseaux</a></li> <li class="sideli"><a class="sidebar-link" href="/ressources">Ressources</a></li> <li class="sideli"><a class="sidebar-link" href="/presse">Presse</a></li> <li class="sideli"><a class="sidebar-link" href="/contacts">Contact</a></li></ul></div></div></main> <footer class="footer-style" data-svelte-h="svelte-1gkeg8z"><div class="flex justify-between"><p class="inline indent-4 text-bold text-white">Raphaël Forment</p> <p><a class="inline pl-4" href="https://github.com/Bubobubobubobubo/livecodingfr">GitHub</a></p></div></footer> 
			
			<script>
				{
					__sveltekit_kb5e1g = {
						base: new URL("..", location).pathname.slice(0, -1),
						env: null
					};

					const element = document.currentScript.parentElement;

					const data = [{"type":"data","data":null,"uses":{}},null];

					Promise.all([
						import("../_app/immutable/entry/start.rkHF838T.js"),
						import("../_app/immutable/entry/app.feFbK-O9.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 9],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
